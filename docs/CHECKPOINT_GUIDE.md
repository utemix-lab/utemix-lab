# Checkpoint Guide: Периодические проверки экосистемы

Checkpoint — это снимок состояния экосистемы с анализом и рекомендациями.

---

## Зачем нужны checkpoint'ы

1. **Фиксация состояния** — понимание, где мы сейчас
2. **Отслеживание прогресса** — что изменилось с прошлого раза
3. **Выявление проблем** — рассинхронизация, дрифт, технический долг
4. **Планирование** — что делать дальше
5. **Онбординг** — быстрый ввод новых LLM в контекст

---

## Когда создавать checkpoint

### Обязательные триггеры

- **Новый репозиторий** — после создания и регистрации
- **Крупное изменение архитектуры** — новый слой, переименование, рефакторинг
- **Смена LLM-агента** — для передачи контекста
- **Потеря контекста** — после сбоя или долгого перерыва

### Рекомендуемая периодичность

| Активность | Частота checkpoint'ов |
|------------|----------------------|
| Активная разработка | Раз в неделю |
| Поддержка | Раз в месяц |
| Архивный режим | Раз в квартал |

---

## Структура checkpoint'а

### Файл: `checkpoints/YYYY-MM-DD.md`

```markdown
# Checkpoint: YYYY-MM-DD

**Тип:** [Полная ревизия | Мини-ревизия | Экстренный]
**Автор:** [LLM/Human]

---

## Состояние экосистемы

### Репозитории
[Таблица всех репо с ролями, слоями, статусами]

### Лицензии
[Статус унификации]

### Документация согласованности
[Список ключевых документов и их статус]

### Слои согласованности
[Статус каждого слоя]

---

## Выполненные задачи
[Что сделано с прошлого checkpoint]

---

## Открытые вопросы
[Нерешённые проблемы]

---

## Рекомендации на следующий checkpoint
[Что проверить/сделать]

---

## Метрики
[Количественные показатели]
```

---

## Типы checkpoint'ов

### 1. Полная ревизия

**Когда:** Раз в месяц или при крупных изменениях

**Что проверять:**
- [ ] Все репозитории (лицензии, README, роли)
- [ ] Universe Graph (узлы, связи)
- [ ] Документация согласованности
- [ ] Слои (определены, реализованы)
- [ ] Workspace конфигурация
- [ ] LLM Playbook актуален

### 2. Мини-ревизия

**Когда:** Еженедельно при активной разработке

**Что проверять:**
- [ ] Новые/изменённые репо
- [ ] Открытые вопросы из прошлого checkpoint
- [ ] Критические рассинхронизации

### 3. Экстренный checkpoint

**Когда:** Потеря контекста, смена агента, сбой

**Что проверять:**
- [ ] Текущее состояние всех репо
- [ ] Незавершённые задачи
- [ ] Конфликты и проблемы

---

## Метрики для отслеживания

| Метрика | Описание | Целевое значение |
|---------|----------|------------------|
| Репозиториев | Общее количество | — |
| С лицензией | % репо с MIT | 100% |
| С секцией "Роль" | % README с ролью | 100% |
| Документов согласованности | Количество | ≥6 |
| Слоёв определено | Из 5 | 5/5 |
| Слоёв реализовано | Из 5 | Зависит от фазы |
| Universe Graph узлов | Количество | Растёт |
| Universe Graph связей | Количество | Растёт |

---

## Процедура создания checkpoint'а

### Шаг 1: Сбор данных

```bash
# Проверить лицензии
Get-ChildItem R:\ -Directory | Where-Object { Test-Path "$($_.FullName)\.git" } | ForEach-Object { ... }

# Проверить README секции
# Проверить Universe Graph
# Проверить документацию
```

### Шаг 2: Анализ

- Сравнить с предыдущим checkpoint
- Выявить отклонения
- Определить приоритеты

### Шаг 3: Документирование

- Создать файл `checkpoints/YYYY-MM-DD.md`
- Заполнить все секции
- Добавить метрики

### Шаг 4: Действия

- Исправить критические проблемы
- Создать задачи для некритических
- Обновить рекомендации

---

## Хранение checkpoint'ов

```
utemix-lab/
└── checkpoints/
    ├── 2026-01-20.md    ← Первый checkpoint
    ├── 2026-02-01.md
    ├── 2026-02-15.md
    └── ...
```

### Именование

- Формат: `YYYY-MM-DD.md`
- Один checkpoint на дату
- При нескольких в день: `YYYY-MM-DD-2.md`

### Архивация

Checkpoint'ы старше 1 года можно перемещать в `checkpoints/archive/`.

---

## Интеграция с LLM

### При потере контекста

1. Прочитать `LLM_PLAYBOOK.md`
2. Прочитать последний checkpoint
3. Прочитать `COHERENCE_LAYERS.md`
4. Продолжить работу

### При создании checkpoint'а

LLM может автоматически:
- Собирать метрики
- Проверять консистентность
- Генерировать отчёт
- Предлагать рекомендации

---

## Связанные документы

- [LLM Playbook](../LLM_PLAYBOOK.md)
- [New Repo Checklist](NEW_REPO_CHECKLIST.md)
- [Слои согласованности](https://github.com/utemix-lab/extended-mind/blob/main/docs/architecture/COHERENCE_LAYERS.md)
