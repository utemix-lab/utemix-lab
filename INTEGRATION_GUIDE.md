# Руководство по интеграции экосистемного слоя

## Пример: vovaipetrova-core

### Текущая система

**vovaipetrova-core** имеет строгую систему фронтматтеров:

```yaml
---
title: "Название"
slug: "kebab-case"
summary: "Описание"
tags: ["Tag"]
machine_tags: ["product/kb"]
status: draft|review|ready
---
```

**Проверки:**
- `lint-docs.mjs` — проверяет обязательные поля
- `sanity-check.mjs` — валидирует фронтматтер
- CI/CD — автоматические проверки

### Новые файлы экосистемного слоя

#### 1. `docs/questions/*.md` (what.md, why.md, how.md)

**Статус**: Параллельное существование

- ❌ **НЕ проходят** через `lint-docs.mjs`
- ❌ **НЕ индексируются** в `pages.json`
- ❌ **НЕ участвуют** в автолинкинге
- ✅ **Существуют** как архив вариантов

**Почему так:**
- Это архивные документы, не основной контент
- Не требуют строгой структуры фронтматтеров
- Гибкость для экспериментов

**Как работать:**
- Добавлять варианты ответов свободно
- Можно добавить опциональный фронтматтер для удобства
- Не нужно приводить к единому канону

#### 2. `CHANGELOG.md`

**Статус**: Параллельное существование

- ❌ **НЕ проходит** через `lint-docs.mjs`
- ❌ **НЕ индексируется** в `pages.json`
- ✅ **Служебный файл** для истории разработки

**Почему так:**
- Это служебный файл, не контент
- Имеет свой формат (Keep a Changelog)
- Не требует фронтматтера

**Как работать:**
- Следовать формату из `ecosystem/history/template-CHANGELOG.md`
- Добавлять записи вручную (пока нет скриптов)
- Обновлять при значительных изменениях

### Механизм согласования

#### Текущий подход: Параллельное существование

**Принцип**: Новые файлы живут параллельно основной системе, не конфликтуя с ней.

**Преимущества:**
- Не ломает существующую систему
- Не требует изменений в скриптах
- Гибкость для экспериментов

**Недостатки:**
- Два параллельных мира
- Нужно помнить исключения

#### Будущий подход: Интеграция через исключения

Если понадобится интегрировать:

1. **Обновить `lint-docs.mjs`**:
```javascript
const EXCLUDED_PATTERNS = [
  /^docs\/questions\//,
  /CHANGELOG\.md$/,
  /^docs\/ECOSYSTEM/
];

function lintFile(file) {
  if (EXCLUDED_PATTERNS.some(pattern => pattern.test(file))) {
    return { errors: [], warnings: [] };
  }
  // ... остальная логика
}
```

2. **Обновить `sanity-check.mjs`** с теми же исключениями

3. **Обновить `build-index.mjs`** (если нужно индексировать)

## Механизм машинного отчёта об истории разработки

### Что сделано ✅

- Созданы файлы `CHANGELOG.md` во всех репозиториях
- Создан шаблон `ecosystem/history/template-CHANGELOG.md`
- Документирован план внедрения

### Что НЕ сделано ❌

- Скрипт генерации из git history — **не создан**
- Скрипт проверки формата — **не создан**
- Интеграция с CI/CD — **не настроена**

### Текущее состояние

**Используется ручное ведение:**
- Разработчики добавляют записи вручную
- Формат описан в шаблоне
- Обновляется при значительных изменениях

**Планируется автоматизация:**
- Скрипт генерации из git history
- Автоматическая проверка формата
- Интеграция в CI/CD

## Рекомендации

### Для работы сейчас

1. **`docs/questions/*.md`**:
   - Добавлять варианты свободно
   - Опциональный фронтматтер для удобства
   - Не нужно приводить к канону

2. **`CHANGELOG.md`**:
   - Следовать формату шаблона
   - Добавлять записи вручную
   - Обновлять при значительных изменениях

3. **Метадокументация**:
   - Можно добавить фронтматтер для удобства
   - Но не обязательно для работы системы

### Для будущей интеграции

Если понадобится интегрировать в систему:

1. Обновить скрипты с исключениями
2. Документировать изменения
3. Обновить `ECOSYSTEM_INTEGRATION.md`

---

*Это руководство описывает текущее состояние. Будет обновляться по мере развития.*
